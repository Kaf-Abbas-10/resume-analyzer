<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATS Resume Analyzer</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        
        // Lucide icons as inline SVG components
        const Upload = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
            </svg>
        );
        
        const FileText = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
        );
        
        const CheckCircle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );
        
        const XCircle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );
        
        const AlertCircle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );
        
        const TrendingUp = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
            </svg>
        );
        
        const Award = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
            </svg>
        );
        
        const FileCheck = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        function ATSResumeAnalyzer() {
          const [file, setFile] = useState(null);
          const [jobDescription, setJobDescription] = useState('');
          const [isDragging, setIsDragging] = useState(false);
          const [isAnalyzing, setIsAnalyzing] = useState(false);
          const [results, setResults] = useState(null);
          const [error, setError] = useState(null);

          const handleDragEnter = (e) => {
            e.preventDefault();
            e.stopPropagation();
            setIsDragging(true);
          };

          const handleDragLeave = (e) => {
            e.preventDefault();
            e.stopPropagation();
            setIsDragging(false);
          };

          const handleDragOver = (e) => {
            e.preventDefault();
            e.stopPropagation();
          };

          const handleDrop = (e) => {
            e.preventDefault();
            e.stopPropagation();
            setIsDragging(false);
            
            const droppedFile = e.dataTransfer.files[0];
            if (droppedFile && droppedFile.type === 'application/pdf') {
              setFile(droppedFile);
              setError(null);
            } else {
              setError('Please upload a PDF file');
            }
          };

          const handleFileInput = (e) => {
            const selectedFile = e.target.files[0];
            if (selectedFile && selectedFile.type === 'application/pdf') {
              setFile(selectedFile);
              setError(null);
            } else {
              setError('Please upload a PDF file');
            }
          };

          const handleAnalyze = async () => {
            if (!file || !jobDescription.trim()) {
              setError('Please upload a resume and enter a job description');
              return;
            }

            setIsAnalyzing(true);
            setError(null);

            try {
              const formData = new FormData();
              formData.append('resume', file);
              formData.append('job_description', jobDescription);

              const response = await fetch('http://localhost:5000/analyze', {
                method: 'POST',
                body: formData,
              });

              if (!response.ok) {
                throw new Error('Analysis failed');
              }

              const data = await response.json();
              setResults(data);
            } catch (err) {
              setError('Failed to analyze resume. Make sure your backend server is running at http://localhost:5000');
              console.error(err);
            } finally {
              setIsAnalyzing(false);
            }
          };

          const getScoreColor = (score) => {
            if (score >= 80) return 'text-green-600';
            if (score >= 60) return 'text-yellow-600';
            return 'text-red-600';
          };

          const getScoreBgColor = (score) => {
            if (score >= 80) return 'bg-green-100';
            if (score >= 60) return 'bg-yellow-100';
            return 'bg-red-100';
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
              <div className="max-w-6xl mx-auto">
                <div className="text-center mb-8">
                  <div className="flex items-center justify-center mb-4">
                    <FileCheck className="w-12 h-12 text-indigo-600 mr-3" />
                    <h1 className="text-4xl font-bold text-gray-800">ATS Resume Analyzer</h1>
                  </div>
                  <p className="text-gray-600">Upload your resume and job description to get instant ATS compatibility analysis</p>
                </div>

                <div className="grid md:grid-cols-2 gap-6 mb-6">
                  <div className="bg-white rounded-lg shadow-lg p-6">
                    <h2 className="text-xl font-semibold mb-4 flex items-center">
                      <Upload className="w-5 h-5 mr-2 text-indigo-600" />
                      Upload Resume
                    </h2>
                    
                    <div
                      onDragEnter={handleDragEnter}
                      onDragOver={handleDragOver}
                      onDragLeave={handleDragLeave}
                      onDrop={handleDrop}
                      className={`border-2 border-dashed rounded-lg p-8 text-center transition-all ${
                        isDragging 
                          ? 'border-indigo-500 bg-indigo-50' 
                          : 'border-gray-300 hover:border-indigo-400'
                      }`}
                    >
                      <input
                        type="file"
                        id="fileInput"
                        accept=".pdf"
                        onChange={handleFileInput}
                        className="hidden"
                      />
                      
                      {file ? (
                        <div className="flex flex-col items-center">
                          <FileText className="w-16 h-16 text-green-500 mb-3" />
                          <p className="font-medium text-gray-700">{file.name}</p>
                          <p className="text-sm text-gray-500 mt-1">{(file.size / 1024).toFixed(2)} KB</p>
                          <button
                            onClick={() => setFile(null)}
                            className="mt-3 text-sm text-red-600 hover:text-red-800"
                          >
                            Remove
                          </button>
                        </div>
                      ) : (
                        <div>
                          <Upload className="w-16 h-16 text-gray-400 mx-auto mb-3" />
                          <p className="text-gray-600 mb-2">Drag & drop your resume here</p>
                          <p className="text-sm text-gray-500 mb-4">or</p>
                          <label
                            htmlFor="fileInput"
                            className="inline-block bg-indigo-600 text-white px-6 py-2 rounded-lg cursor-pointer hover:bg-indigo-700 transition-colors"
                          >
                            Browse Files
                          </label>
                          <p className="text-xs text-gray-500 mt-3">PDF files only</p>
                        </div>
                      )}
                    </div>
                  </div>

                  <div className="bg-white rounded-lg shadow-lg p-6">
                    <h2 className="text-xl font-semibold mb-4 flex items-center">
                      <FileText className="w-5 h-5 mr-2 text-indigo-600" />
                      Job Description
                    </h2>
                    <textarea
                      value={jobDescription}
                      onChange={(e) => setJobDescription(e.target.value)}
                      placeholder="Paste the job description here...&#10;&#10;Example:&#10;We are hiring a Python Backend Developer.&#10;Skills: Python, FastAPI, SQL, REST APIs, Docker, Git.&#10;Minimum 2+ years experience."
                      className="w-full h-64 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"
                    />
                  </div>
                </div>

                {error && (
                  <div className="bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center">
                    <XCircle className="w-5 h-5 text-red-600 mr-2" />
                    <p className="text-red-800">{error}</p>
                  </div>
                )}

                <div className="text-center mb-8">
                  <button
                    onClick={handleAnalyze}
                    disabled={isAnalyzing || !file || !jobDescription.trim()}
                    className={`px-8 py-3 rounded-lg font-semibold text-white transition-all ${
                      isAnalyzing || !file || !jobDescription.trim()
                        ? 'bg-gray-400 cursor-not-allowed'
                        : 'bg-indigo-600 hover:bg-indigo-700 hover:shadow-lg'
                    }`}
                  >
                    {isAnalyzing ? 'Analyzing...' : 'Analyze Resume'}
                  </button>
                </div>

                {results && (
                  <div className="bg-white rounded-lg shadow-lg p-8">
                    <h2 className="text-2xl font-bold mb-6 flex items-center">
                      <Award className="w-6 h-6 mr-2 text-indigo-600" />
                      Analysis Results
                    </h2>

                    <div className={`${getScoreBgColor(results.match_score)} rounded-lg p-6 mb-6`}>
                      <div className="flex items-center justify-between">
                        <div>
                          <p className="text-sm font-medium text-gray-600 mb-1">ATS Match Score</p>
                          <p className={`text-5xl font-bold ${getScoreColor(results.match_score)}`}>
                            {results.match_score}%
                          </p>
                        </div>
                        <TrendingUp className={`w-16 h-16 ${getScoreColor(results.match_score)}`} />
                      </div>
                    </div>

                    {results.components && (
                      <div className="grid md:grid-cols-2 gap-4 mb-6">
                        <div className="border border-gray-200 rounded-lg p-4">
                          <p className="text-sm text-gray-600 mb-1">Skill Match</p>
                          <p className="text-2xl font-bold text-gray-800">
                            {(results.components.skill_score_raw * 100).toFixed(0)}%
                          </p>
                        </div>
                        <div className="border border-gray-200 rounded-lg p-4">
                          <p className="text-sm text-gray-600 mb-1">Experience</p>
                          <p className="text-2xl font-bold text-gray-800">
                            {results.components.experience_years} years
                          </p>
                        </div>
                        <div className="border border-gray-200 rounded-lg p-4">
                          <p className="text-sm text-gray-600 mb-1">Formatting Score</p>
                          <p className="text-2xl font-bold text-gray-800">
                            {(results.components.formatting_score_raw * 100).toFixed(0)}%
                          </p>
                        </div>
                        <div className="border border-gray-200 rounded-lg p-4">
                          <p className="text-sm text-gray-600 mb-1">Keyword Coverage</p>
                          <p className="text-2xl font-bold text-gray-800">
                            {(results.components.keyword_coverage_score * 100).toFixed(0)}%
                          </p>
                        </div>
                      </div>
                    )}

                    {results.details?.skill_detail?.matched?.length > 0 && (
                      <div className="mb-6">
                        <h3 className="font-semibold text-lg mb-3 flex items-center text-green-700">
                          <CheckCircle className="w-5 h-5 mr-2" />
                          Matched Skills
                        </h3>
                        <div className="flex flex-wrap gap-2">
                          {results.details.skill_detail.matched.map((skill, idx) => (
                            <span key={idx} className="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">
                              {skill}
                            </span>
                          ))}
                        </div>
                      </div>
                    )}

                    {results.details?.skill_detail?.missing?.length > 0 && (
                      <div className="mb-6">
                        <h3 className="font-semibold text-lg mb-3 flex items-center text-red-700">
                          <XCircle className="w-5 h-5 mr-2" />
                          Missing Skills
                        </h3>
                        <div className="flex flex-wrap gap-2">
                          {results.details.skill_detail.missing.map((skill, idx) => (
                            <span key={idx} className="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm">
                              {skill}
                            </span>
                          ))}
                        </div>
                      </div>
                    )}

                    {results.recommendations?.length > 0 && (
                      <div>
                        <h3 className="font-semibold text-lg mb-3 flex items-center text-blue-700">
                          <AlertCircle className="w-5 h-5 mr-2" />
                          Recommendations
                        </h3>
                        <ul className="space-y-2">
                          {results.recommendations.map((rec, idx) => (
                            <li key={idx} className="flex items-start">
                              <span className="text-blue-600 mr-2">â€¢</span>
                              <span className="text-gray-700">{rec}</span>
                            </li>
                          ))}
                        </ul>
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          );
        }

        ReactDOM.render(<ATSResumeAnalyzer />, document.getElementById('root'));
    </script>
</body>
</html>